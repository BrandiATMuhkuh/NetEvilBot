<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Person.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Person.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Created by jbr134 on 16/12/14.
 */


var brain = require("brain");
/**
 * The class person describes one person in the network.
 * Each person has it's own "brain". By interacting with the other people in the network
 * the person learns how others call words.
 * @param {string} myName The name of the person
 * @constructor
 */
var Person = function (myName) {
    this.myName = myName;
    this.training = [];
    this.myBrain = new brain.NeuralNetwork();

    /**
     * Train the person.
     * It's important to notice that the neural network is recreated each time the person
     * is trained. The reason is that the system I use (npm install brain) does it in this way.
     * @param {string} image Name of the image
     * @param {string} partnerName The partners name
     * @param {string} partnerImageName How the partner names the image
     */
    this.addTraining = function(image, partnerName, partnerImageName){
        var o = {};
        o[partnerImageName] = 1;
        var i = {};
        i[image] = 1;
        i[partnerName] = 1;

        var t = {input: i, output: o};
        //console.log(t);

        this.training.push(t);
        this.myBrain = new brain.NeuralNetwork(); //This system uses BULK training. Sorry ;(
        this.myBrain.train(this.training);
    };

    /**
     * The persons guess what it's partner used for an image.
     * Returns an array with probabilities.
     * @param {string} image Name of the image
     * @param {string} partnerName The partners name
     * @return {array} A list of word probabilities
     */
    this.guess = function(image, partnerName){
        var i = {};
        i[image] = 1;
        i[partnerName] = 1;
        return this.myBrain.run(i);
    };


    /**
     * The persons guess what it's partner used for an image.
     * Returns only the name of the world with highest guess
     * @param {string} image Name of the image
     * @param {string} partnerName The partners name
     * @return {string} the most probable word
     */
    this.guessFirst = function(image, partnerName){
        var probs = this.guess(image, partnerName);

        //find highest probable word
        var word = null;
        var probablity = null;
        for(var pr in probs){

            if(word == null){
                word = pr;
                probablity = probs[pr];
            }else{
                if(probs[pr] > probablity){
                    word = pr;
                    probablity = probs[pr];
                }
            }
        }

        return(word);
    }

    /**
     * This will create the first initialisation of the network.
     * All use data will be removed. So only neighbors are included
     * This needs to be executed after the person was cloned.
     */
    this.init = function(){
        this.myBrain = new brain.NeuralNetwork(); //This system uses BULK training. Sorry ;(

        //remove training against itself
        var newTrain = [];
        for(tr in this.training){
            if(Object.keys(this.training[tr].input)[1] != this.myName){
                var randConf = (Math.floor(Math.random() * 6) + 1);
                for(i = 0; i &lt; randConf; i++) {
                    newTrain.push(this.training[tr]);
                }
            }
        }

        this.training = newTrain;

        this.myBrain.train(this.training);
    }
};

module.exports = Person;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Person.html">Person</a></li></ul><h3>Global</h3><ul><li><a href="global.html#brain">brain</a></li><li><a href="global.html#clone">clone</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha11</a> on Wed Dec 17 2014 16:46:46 GMT+1300 (NZDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
