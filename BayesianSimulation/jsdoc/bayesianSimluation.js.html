<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: bayesianSimluation.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: bayesianSimluation.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Created by jbr134 on 16/12/14.
 */
/**
 * IMPORTANT:
 * 1: All data needs to be between 0 and 1
 * 2: All data needs to be trained in bulk. --> recreate of NeuralNetwork object --> expensive I know
 */
var clone = require("clone");
var Person = require("./Person.js");
var nodes = 10; //The nodes/people of the network


//All possible images in the network
var images = [
    "image0",
    "image1",
    "image2",
    "image4"];

//All possible words in the network
var words = [
    "fish",
    "dog",
    "cat",
    "crocodile"];


//All possible users in the network
var users = [];

var randArrayElement = function(arr){
    return arr[Math.floor(Math.random()*arr.length)];
}



var initTrainingSet = function (image, partnerName, partnerImageName) {
    console.log("time to create a training set");

    var initArray = [];

    image.forEach(function (im) {
        partnerImageName.forEach(function (wo) {
            for (no = 0; no &lt; partnerName; no++) {
                var i = {};
                i[im] = 1;

                i["person" + no] = 1;
                var o = {};
                o[wo] = 1;
                var t = {input: i, output: o};

                initArray.push(t);

            }
        })
    });

    return initArray;

}

var printNetworkState = function(state, person, image){
    var cvs = "";
    cvs += "" + state + ", person" + person + ", " + image + ", ";
    for (no = 0; no &lt; nodes; no++) {
        var gf = users[person].guessFirst(image, "person" + no);
        var g = users[person].guess(image, "person" + no);

        if(person != no) {
            cvs += "person" + no + ", " + gf +", "+ g[gf]+", ";
        }

    }
    cvs+= "\n";
    return cvs;
}

initTrainingData = initTrainingSet(images, nodes, words);

//create initial person. We close it later for performance reasons
var dolly = new Person("Dolly");
dolly.training = initTrainingData;
//run initial training
//dolly.init();


for (var i = 0; i &lt; nodes; i++) { //We clone 5 people
    var notDollyAgain = clone(dolly);
    notDollyAgain.myName = "person" + i;
    notDollyAgain.init();
    users.push(notDollyAgain);
}

var mycvs = "";
for(var i = 0; i &lt; 50; i++) {
    var randImage = randArrayElement(images);
    var randUser1 = randArrayElement(users);
    var randUser2 = randArrayElement(users);

    do {
        randUser2 = randArrayElement(users);
    } while (randUser1.myName == randUser2.myName);

    var ua1 = randUser1.guessFirst(randImage, randUser2.myName);
    var ua2 = randUser2.guessFirst(randImage, randUser1.myName);
    //console.log(randUser1.myName, ua1, randUser2.myName, ua2);


    //Print CSV type output at network state x
    for (var k = 0; k &lt; nodes; k++) {
       mycvs += printNetworkState(i, k, "image0");
    }

    randUser1.addTraining(randImage, randUser2.myName, ua2);
    randUser2.addTraining(randImage, randUser1.myName, ua1);



}
console.log(mycvs);</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Person.html">Person</a></li></ul><h3>Global</h3><ul><li><a href="global.html#brain">brain</a></li><li><a href="global.html#clone">clone</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha11</a> on Wed Dec 17 2014 16:46:46 GMT+1300 (NZDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
